import json
from collections import namedtuple
from pymongo import MongoClient
from munch import munchify

client = MongoClient("mongodb://localhost:27017/")
db = client["people"]
families = db["family"]


class Person:
    def __init__(self, name, age, sex):
        self.name = name
        self.age = age
        self.sex = sex

    def add_age(self):
        self.age += 1


class Family:
    def __init__(self, dad, mum):
        self.dad = dad
        self.mum = mum


mum = Person("mama", 50, "woman")
dad = Person("tata", 50, "man")
family = Family(dad, mum)
# way to convert game
family_str = json.dumps(family, default=lambda x: x.__dict__)

# convert to object
# new_family = json.loads(tmp_family, object_hook=lambda d: namedtuple('X', d.keys())(*d.values()))
family_json_dict = json.loads(family_str)
print(family_json_dict)
# e = munchify(family_json_dict)
# print(type(e))
# e = Family(**family_json_dict)
# print(type(e.dad))
# family_id = families.insert_one(family_json_dict).inserted_id
# families.delete_many({})
# for document in families.find():
#     print(document)
